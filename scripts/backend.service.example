# Copy this file to /etc/systemd/system/eyewear-backend.service and edit paths/user
# Then run:
#   sudo systemctl daemon-reload
#   sudo systemctl enable --now eyewear-backend.service
# Logs will go to journald by default; you can also direct gunicorn logs to files in ExecStart

[Unit]
Description=Eyewear Backend (Gunicorn)
After=network.target

[Service]
Type=simple
# >>> EDIT THESE <<<
User=www-data
Group=www-data
WorkingDirectory=/opt/eyewear-display/backend
Environment=HOST=0.0.0.0
Environment=PORT=5000
# Optional: point to your venv
# Environment=PATH=/opt/venvs/eyewear/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin

# Prefer gunicorn; fallback to waitress if you want
ExecStart=/usr/bin/env gunicorn --bind 0.0.0.0:5000 --workers 2 --threads 1 --timeout 60 wsgi:application
# ExecStart=/usr/bin/env waitress-serve --listen=0.0.0.0:5000 wsgi:application

Restart=on-failure
RestartSec=3
TimeoutStartSec=30

[Install]
WantedBy=multi-user.target
